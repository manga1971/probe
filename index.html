<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forma</title>
    <meta name="description" content="Manage and create forms quickly via voice dictation.">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js"></script>
</head>
<body>

    <div class="app-container">
        <header class="app-header-compact" id="appHeader">
            <h1 id="appTitle" class="app-title"><a href="#" id="homeNav">Forma</a></h1>
            <div class="header-actions">
                <input type="search" id="headerSearchInput" class="header-search-input" placeholder="Search forms...">
                <button id="accountSettingsButton" class="icon-button" aria-label="Account Settings">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.33 0-4 .67-4 2v3h8v-3c0-1.33-2.67-2-4-2z"/></svg>
                </button>
            </div>
        </header>

        <main class="main-content">
            
            <div id="forma-page" class="page-section active">
                <div class="glass-container filter-section">
                    <div class="filter-group">
                        <label for="filterStatus">Status:</label>
                        <select id="filterStatus">
                            <option value="all">All</option>
                            <option value="not-started">New</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterDate">Date:</label>
                        <input type="date" id="filterDate">
                    </div>
                    <div class="filter-group">
                        <label for="filterCategory">Category:</label>
                        <select id="filterCategory">
                            <option value="all">All</option>
                        </select>
                    </div>
                </div>

                <div class="glass-container">
                    <h2 class="section-title">All Forms</h2>
                    <div id="formsList" class="list-container custom-scrollbar">
                        <p class="empty-state-message" id="noFormsMessage">No forms created yet.</p>
                    </div>
                </div>
            </div>

            <div id="edit-page" class="page-section">
                <div id="dictationContainer" class="dictation-container glass-container">
                    <div class="container-header">
                        <div id="formIdentifier" class="form-id-badge" style="display: none;">Form #</div>
                        <button class="accordion-header" id="detailsAccordionHeader">
                            Details
                            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="accordion-icon"><path d="M7 10l5 5 5-5z"/></svg>
                        </button>
                    </div>
                    <div class="accordion-content">
                        <div class="metadata-fields">
                            <label for="formTitle">Title:</label>
                            <input type="text" id="formTitle" placeholder="Form title" autocomplete="off">
                            <label for="formClient">Client:</label>
                            <input type="text" id="formClient" placeholder="Client name" autocomplete="off">
                            <label for="formCategory">Category:</label>
                            <input type="text" id="formCategory" placeholder="e.g., Legal, Medical, Project" autocomplete="off">
                            <label for="formStatus">Status:</label>
                            <select id="formStatus">
                                <option value="not-started">New</option>
                                <option value="in-progress">In Progress</option>
                                <option value="completed">Completed</option>
                            </select>
                            <label for="plannedDate">Planned date:</label>
                            <input type="date" id="plannedDate">
                            <label for="initialNotes">Notes:</label>
                            <textarea id="initialNotes" placeholder="Add initial notes here..."></textarea>
                            <button id="saveCharacteristicsButton" class="save-button">Save Characteristics</button>
                        </div>
                    </div>
                    <div class="new-note-container">
                        <p class="new-note-label">New Note</p>
                        <div id="transcriptionContent" class="text-display custom-scrollbar" contenteditable="true">
                            Press "Start" to begin dictation...
                        </div>
                    </div>
                    <div id="existingNotesContainer" class="existing-notes-container custom-scrollbar">
                        </div>
                </div>
            </div>
        </main>
        
        <button id="dictateButtonHome" class="floating-dictate-button">
            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.2-3c0 2.88-2.22 5.2-5 5.2-2.78 0-5-2.32-5-5.2H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.88c3.39-.49 6-3.39 6-6.92h-2.8z"/></svg>
        </button>

        <div id="dictationControls" class="player-controls-compact-fixed">
             <div class="player-zone-1">
                <button id="dictationToggleButton" class="control-button">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.2-3c0 2.88-2.22 5.2-5 5.2-2.78 0-5-2.32-5-5.2H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.88c3.39-.49 6-3.39 6-6.92h-2.8z"/></svg>
                </button>
            </div>
            <div class="player-zone-2">
                <div id="pulsatingLed" class="pulsating-led"></div>
                <span id="chronometer" class="chronometer">00:00</span>
            </div>
            <div class="player-zone-3">
                <button id="copyAndSaveButton" class="control-button">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                </button>
                <button id="deleteFormButton" class="control-button button-danger">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                </button>
            </div>
        </div>
    </div>
    
    <script type="module" src="app.js"></script>
</body>
</html>
