<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Forma</title>
  <meta name="description" content="Forma — simple voice-first notes & forms." />
  <link rel="stylesheet" href="style.css" />
  <!-- Storage helper -->
  <script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js"></script>
</head>
<body>
  <div class="app-root">
    <!-- Fixed Header (Zone 1) -->
    <header id="appHeader" class="app-header">
      <div class="brand">
        <a href="#" id="brandHome" aria-label="Back to Home">Forma</a>
      </div>
      <div class="search-wrap">
        <input id="headerSearchInput" type="search" placeholder="Search…" autocomplete="off" />
      </div>
      <div class="account-wrap">
        <button id="accountBtn" class="icon-btn" aria-label="Account">
          <svg viewBox="0 0 24 24" class="icon"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-5 0-9 2.5-9 5v1h18v-1c0-2.5-4-5-9-5z"/></svg>
        </button>
      </div>
    </header>

    <main class="app-main">
      <!-- HOME (Forma) -->
      <section id="homePage" class="page active">
        <div class="toolbar glass">
          <div class="filters">
            <label class="sr-only" for="filterStatus">Status</label>
            <select id="filterStatus">
              <option value="all">All</option>
              <option value="not-started">New</option>
              <option value="in-progress">In Progress</option>
              <option value="completed">Completed</option>
            </select>

            <label class="sr-only" for="filterDate">Date</label>
            <input id="filterDate" type="date" />

            <label class="sr-only" for="filterCategory">Category</label>
            <select id="filterCategory">
              <option value="all">All categories</option>
            </select>
          </div>

          <div class="home-actions">
            <button id="newFormBtn" class="btn">New Form</button>
            <button id="dictateButtonHome" class="btn primary">
              <svg viewBox="0 0 24 24" class="icon"><path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0zM12 19a7 7 0 0 0 7-7h-2a5 5 0 1 1-10 0H5a7 7 0 0 0 7 7z"/></svg>
              Dictate
            </button>
          </div>
        </div>

        <div id="noForms" class="empty-state hidden">No forms yet. Tap <b>New Form</b> or <b>Dictate</b> to start.</div>
        <div id="formsList" class="cards-grid"></div>
      </section>

      <!-- EDIT PAGE -->
      <section id="editPage" class="page">
        <!-- Zone 2: Header inside page (Form # + Details accordion) -->
        <div class="glass section">
          <div class="section-header">
            <div class="form-id" id="formIdLabel">Form # —</div>
            <div class="spacer"></div>
            <button id="deleteFormBtn" class="icon-btn danger" title="Delete form">
              <svg viewBox="0 0 24 24" class="icon"><path d="M6 7h12v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7zm3-3h6l1 1h4v2H4V5h4l1-1z"/></svg>
            </button>
          </div>

          <details id="detailsAccordion" class="accordion" open>
            <summary>Details</summary>
            <div class="grid two">
              <label class="field">
                <span>Title</span>
                <input id="formTitle" type="text" placeholder="Add a title…" />
              </label>
              <label class="field">
                <span>Category</span>
                <input id="formCategory" type="text" placeholder="e.g. Real Estate, Client, Ideas" />
              </label>
            </div>
            <div class="grid two">
              <label class="field">
                <span>Status</span>
                <select id="formStatus">
                  <option value="not-started">New</option>
                  <option value="in-progress">In Progress</option>
                  <option value="completed">Completed</option>
                </select>
              </label>
              <label class="field">
                <span>Language</span>
                <select id="speechLang">
                  <option value="ro-RO">Română (ro-RO)</option>
                  <option value="en-US">English (en-US)</option>
                </select>
              </label>
            </div>
          </details>
        </div>

        <!-- Zone 3: New Note + Existing Notes -->
        <div class="glass section">
          <div class="section-header">
            <div class="form-id">New Note</div>
          </div>
          <div class="newnote-wrap">
            <textarea id="newNote" placeholder='Press "Start" or begin typing…'></textarea>
          </div>

          <div id="existingNotes" class="notes-list"></div>
        </div>

        <!-- Fixed Player -->
        <div id="playerBar" class="player">
          <div class="left-controls">
            <button id="pauseBtn" class="icon-btn" title="Pause / Resume">
              <svg viewBox="0 0 24 24" class="icon"><path d="M6 4h4v16H6zM14 4h4v16h-4z"/></svg>
            </button>
            <div id="recIndicator" class="rec-dot" title="Recording"></div>
            <div id="playerTime" class="time">00:00</div>
          </div>
          <div class="right-controls">
            <button id="copyBtn" class="icon-btn" title="Copy">
              <svg viewBox="0 0 24 24" class="icon"><path d="M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/></svg>
            </button>
            <button id="saveBtn" class="icon-btn" title="Save note">
              <svg viewBox="0 0 24 24" class="icon"><path d="M17 3H5a2 2 0 0 0-2 2v14l6-3 6 3V5a2 2 0 0 0-2-2z"/></svg>
            </button>
            <button id="deleteBtn" class="icon-btn danger" title="Delete current text">
              <svg viewBox="0 0 24 24" class="icon"><path d="M6 7h12v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7zm3-3h6l1 1h4v2H4V5h4l1-1z"/></svg>
            </button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="toast" class="toast hidden">Saved</div>

  <script type="module" src="common.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
